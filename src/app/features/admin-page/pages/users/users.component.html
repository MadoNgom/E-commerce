<div class="container">
  <div class="py-2">
    <button (click)="addUsers()" class="border border-white rounded bg-amber-400  text-slate-900 p-2"> <i class="pi pi-user-plus"></i> Nouveau utilisateur</button>
  </div>
  <ng-container *ngIf="users$ | async as users">
    <table mat-table [dataSource]="users">
      <ng-container matColumnDef="Nom complet">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nom complet </th>
        <td mat-cell *matCellDef="let element">
            {{element.firstname + ' ' +element.lastname}}
          </td>
      </ng-container>
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef> Email </th>
        <td mat-cell *matCellDef="let element"> {{element.email}} </td>
      </ng-container>
      <ng-container matColumnDef="role">
        <th mat-header-cell *matHeaderCellDef> Profile </th>
        <td mat-cell *matCellDef="let element">
          <p-tag 
            *ngIf="element.role === 'boutiquier'" 
            value="Boutiquier" 
            styleClass="p-mr-2" 
            severity="warning">
          </p-tag>
          <p-tag 
            *ngIf="element.role === 'admin'" 
            value="Administrateur" 
            styleClass="p-mr-2" 
            severity="danger">
          </p-tag>
          <p-tag 
            *ngIf="element.role === 'user'" 
            value="Client" 
            styleClass="p-mr-2" 
            severity="success">
          </p-tag>
        </td>
      </ng-container>
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef> Actions </th>
        <td mat-cell *matCellDef="let element">
          <button class="border border-white rounded bg-amber-400  text-slate-900 p-2">Modifier</button>
          <button class="border border-white rounded bg-red-400  text-slate-900 p-2">Supprimer</button>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </ng-container>
  <mat-paginator showFirstLastButtons class="mt-2" [length]="totalUsers" [pageSize]="5" [pageSizeOptions]="pageSizeOptions"
    (pageSizeChange)="onPageSizeChange($event)" (page)="onPageChange($event)"></mat-paginator>
</div>